<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>สรุปผลการประเมิน</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f4f4f4;
            color: #333;
        }
        h2 {
            color: #4CAF50;
        }
        .summary-section {
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.1);
            max-width: 600px;
        }
        .exercise {
            font-size: 16px;
            color: #ff5722;
        }
    </style>
</head>
<body>

    <h2>Summary of Responses</h2>
    <div class="summary-section">
        <p>คะแนนรวม: <span id="totalScore">0</span></p>
        <p>ผลการประเมิน:</p>
        <div id="result"></div>
    </div>

<script>
    window.onload = function() {
        const answers = JSON.parse(localStorage.getItem("surveyAnswers"));  // ดึงข้อมูลจาก localStorage
        if (answers) {
            let totalScore = 0;
            let failedQuestions = [];
            
            const cutOffPoints = {
                emotion: { low: 65, high: 80 },
                confidence: { low: 65, high: 80 },
                risk: { low: 65, high: 80 }
            };

            const questionData = [
                { q: answers.q1, domain: 'Emotion', text: 'ข้อ 1: คุณมั่นใจเพียงใดว่าจะสามารถเล่นกีฬาได้ดีในระดับเดิม', exercises: { low: 'Imagery + Progressive relaxation, Pawanmuktasana series', mid: 'Deep breathing exercise (Nadi Shodhana), Yoga' }},
                { q: answers.q2, domain: 'Emotion', text: 'ข้อ 2: คุณคิดว่ามีโอกาสมากน้อยเพียงใดที่จะกลับมาบาดเจ็บซ้ำบริเวณเข่าจากการเล่นกีฬา', exercises: { low: 'Imagery + Progressive relaxation, Pawanmuktasana series', mid: 'Deep breathing exercise (Nadi Shodhana), Yoga' }},
                { q: answers.q3, domain: 'Emotion', text: 'ข้อ 3: คุณมีความกังวลเพียงใดเกี่ยวกับการเล่นกีฬา', exercises: { low: 'Imagery + Progressive relaxation, Pawanmuktasana series', mid: 'Deep breathing exercise (Nadi Shodhana), Yoga' }},
                { q: answers.q4, domain: 'Emotion', text: 'ข้อ 4: คุณมั่นใจเพียงใดว่าจะไม่เกิดอาการเข่าหลวมจากการเล่นกีฬาอีก', exercises: { low: 'Imagery + Progressive relaxation, Pawanmuktasana series', mid: 'Deep breathing exercise (Nadi Shodhana), Yoga' }},
                { q: answers.q5, domain: 'Emotion', text: 'ข้อ 5: คุณมั่นใจเพียงใดว่าคุณสามารถเล่นกีฬาได้โดยไม่ต้องกังวลเกี่ยวกับการบาดเจ็บของเข่า', exercises: { low: 'Imagery + Progressive relaxation, Pawanmuktasana series', mid: 'Deep breathing exercise (Nadi Shodhana), Yoga' }},
                { q: answers.q6, domain: 'Confidence in performance', text: 'ข้อ 6: คุณรู้สึกหงุดหงิดเพียงใด ที่ต้องนึกถึงเข่าที่บาดเจ็บเวลาเล่นกีฬา', exercises: { low: 'Squat, shuffle', mid: 'Box jump, vertical jump' }},
                { q: answers.q7, domain: 'Confidence in performance', text: 'ข้อ 7: คุณกลัวเพียงใดว่าจะเกิดการบาดเจ็บซ้ำบริเวณเข่าจากการเล่นกีฬา', exercises: { low: 'Wall Squat, Skater hop', mid: 'Lunges to knee jump, Spilt squat jump' }},
                { q: answers.q8, domain: 'Confidence in performance', text: 'ข้อ 8: คุณมั่นใจเพียงใดว่าเข่าของคุณสามารถรับแรงกระแทกได้', exercises: { low: 'Hop test, Step up and down', mid: 'Single leg hop hop stick, Single leg cross over' }},
                { q: answers.q9, domain: 'Confidence in performance', text: 'ข้อ 9: คุณกลัวเพียงใดว่าจะบาดเจ็บบริเวณเข่าโดยไม่ได้ตั้งใจจากการเล่นกีฬา', exercises: { low: 'Lateral step up, Pop squat', mid: '180 degree jump, Power step up' }},
                { q: answers.q10, domain: 'Confidence in performance', text: 'ข้อ 10: คุณคิดว่าการผ่าตัดและการฟื้นฟูร่างกายเป็นอุปสรรคต่อการกลับไปเล่นกีฬาเพียงใด', exercises: { low: 'Bridge, Single leg bridge', mid: 'Single leg bridge with ball, Hamstring curl on ball' }},
                { q: answers.q11, domain: 'Risk appraisal', text: 'ข้อ 11: คุณมั่นใจเพียงใดว่าจะแสดงความสามารถทางกีฬาได้อย่างดี', exercises: { low: 'Weight shifting, SEBT', mid: 'Multi directional shuttle run, Fig of eight' }},
                { q: answers.q12, domain: 'Risk appraisal', text: 'ข้อ 12: คุณรู้สึกผ่อนคลายเพียงใดเมื่อเล่นกีฬา', exercises: { low: 'Transitional stabilization, Lunges with dumbbells', mid: 'Sumo squat with dumbbells, Sled drag' }},
            ];

            questionData.forEach((q) => {
                totalScore += q.q;  // เพิ่มคะแนนรวม
                let resultText = '';

                if (q.q < cutOffPoints[q.domain.toLowerCase()].low) {
                    resultText = `${q.text} - ต้องฝึกเพิ่ม: ${q.exercises.low}`;
                } else if (q.q >= cutOffPoints[q.domain.toLowerCase()].low && q.q <= cutOffPoints[q.domain.toLowerCase()].high) {
                    resultText = `${q.text} - ต้องฝึกเพิ่ม: ${q.exercises.mid}`;
                }

                if (resultText) {
                    failedQuestions.push(`<p class="exercise">${resultText}</p>`);
                }
            });

            document.getElementById("totalScore").innerText = totalScore;
            document.getElementById("result").innerHTML = failedQuestions.join("");
        } else {
            alert("ไม่มีข้อมูลใน localStorage");
        }
    };
</script>

</body>
</html>

